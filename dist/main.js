(()=>{"use strict";const t=(t,e,n,o="important",i=!1)=>({id:Date.now(),title:t,desc:e,dueDate:n,priority:o,completed:i}),e="very important",n={default:[],home:[],work:[]},o=(t,e="default")=>(n[e].push(t),n);function i(e){document.querySelectorAll(".projects-list-button").forEach((n=>{n.addEventListener("click",(()=>{mainHeader.textContent=n.textContent,console.log(e[n.textContent]),function(){const e=document.createElement("button");e.setAttribute("id","new-ToDo-btn"),e.textContent="add",main.appendChild(e),e.addEventListener("click",(()=>{const e=document.createElement("div");e.setAttribute("id","input-Div"),main.appendChild(e),d("input-Div","form",{id:"input-form"}),d("input-form","label",{for:"title-input"}).textContent="Title",d("input-form","input",{type:"text",id:"title-input"}),d("input-form","label",{for:"desc-input"}).textContent="Description",d("input-form","textarea",{id:"desc-input",rows:"5"}),d("input-form","label",{for:"dueDate"}).textContent="Due date",d("input-form","input",{type:"date",id:"dueDate"}),d("input-form","label",{for:"priority"}).textContent="Priority",d("input-form","select",{id:"priority"}),d("priority","option",{value:"very"}).textContent="Very Important",d("priority","option",{value:"important"}).textContent="Important",d("priority","option",{value:"not"}).textContent="Not Important",d("input-form","button",{id:"addToDoBtn",type:"button"}).textContent="Add To-do",d("input-form","button",{id:"cancelBtn",type:"button"}).textContent="Cancel",function(){const e=document.getElementById("addToDoBtn"),n=(document.getElementById("cancelBtn"),document.getElementById("title-input").value),i=document.getElementById("desc-input").value,d=document.getElementById("dueDate").value,c=document.getElementById("priority").value,r=document.getElementById("mainHeader").value;e.addEventListener("click",(()=>{o(t(n,i,d,c),r)}))}()}))}();const i=document.createElement("ul");e[n.textContent].forEach((t=>{const e=document.createElement("li");e.classList.add("li-element"),Object.keys(t).forEach((n=>{if("title"===n||"desc"===n||"dueDate"===n){const o=document.createElement("p");o.innerHTML=t[n],e.appendChild(o)}})),i.appendChild(e)})),mainDiv.innerHTML="",mainDiv.appendChild(i)}))}))}function d(t,e,n){let o=document.createElement(e);for(let t in n)n.hasOwnProperty(t)&&o.setAttribute(t,n[t]);return document.getElementById(t).appendChild(o),o}const c=t("Milk","Buy some milk for the cat","12-02-2024",e),r=t("Writing","Write some text to my book","14-04-2024","not important",!0),u=t("Buy cat food","Buy some kitekat","04-05-2024",e);o(c),o(r),o(u),function(t){const e=document.getElementById("main"),n=document.createElement("h1");n.textContent="Lika i ya",n.setAttribute("id","mainHeader"),e.appendChild(n)}(),function(){const t=document.getElementById("main"),e=document.createElement("div");e.setAttribute("id","mainDiv"),t.appendChild(e)}(),function t(e){const o=document.querySelector("#projects-div"),d=Object.keys(e);o.innerHTML="";const c=document.createElement("h3");return c.textContent="Projects",o.appendChild(c),d.forEach((t=>{const e=document.createElement("button");e.classList.add("projects-list-button"),e.textContent=t,o.appendChild(e)})),function(e,o){const d=document.querySelector("#projects-div"),c=document.createElement("button");c.textContent="New project +",c.setAttribute("id","add-new-project-btn"),d.appendChild(c),c.addEventListener("click",(()=>{const e=document.createElement("form");e.classList.add("input-field");const r=document.createElement("input");r.setAttribute("type","text"),r.setAttribute("id","project-input"),r.setAttribute("maxlength","24"),r.setAttribute("placeholder","Enter project name"),r.setAttribute("autocomplete","off");const u=document.createElement("button");u.setAttribute("type","button"),u.setAttribute("id","add-project-btn"),u.textContent="Add";const a=document.createElement("button");a.setAttribute("type","button"),a.setAttribute("id","cancel-add-project-btn"),a.textContent="Cancel",e.appendChild(r),e.appendChild(u),e.appendChild(a),d.appendChild(e),c.setAttribute("disabled",!0),function(e){const o=document.getElementById("add-project-btn"),d=document.querySelector("#cancel-add-project-btn");o.addEventListener("click",(()=>{const o=document.getElementById("project-input").value;n[o]=[],console.table(n),t(e),i(e)})),d.addEventListener("click",(()=>{const t=document.querySelector(".input-field"),e=document.querySelector("#add-new-project-btn");t&&t.remove(),e.removeAttribute("disabled")}))}(o)}))}(0,e),o}(n),i(n)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LGlCQUFpQixTQUFTLEtBQzdCLE1BQU11RCxFQUFlM0QsU0FBU2dCLGVBQWUsaUJBQWlCRSxNRHBHbEV6QixFQ3FHa0JrRSxHRHJHTSxHQ3NHcEJwRCxRQUFRcUQsTUFBTW5FLEdBQ2RzRCxFQUFxQ2hELEdBQ3JDRCxFQUFnQkMsRUFBUyxJQUk3QjJELEVBQVV0RCxpQkFBaUIsU0FBUyxLQUNoQyxNQUFNaUQsRUFBT3JELFNBQVNpRCxjQUFjLGdCQUM5QjlDLEVBQVNILFNBQVNpRCxjQUFjLHdCQUNsQ0ksR0FBTUEsRUFBS1EsU0FDZjFELEVBQU8yRCxnQkFBZ0IsV0FBVyxHQUcxQyxDQXpCUUMsQ0FBa0JoRSxFQUFTLEdBR25DLENBbEdJd0QsQ0FBaUIsRUFBaUJ4RCxHQUMzQmlELENBQ1gsQ0NmSUQsQ0FBcUN0RCxHQUNyQ0ssRUFBZ0JMLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90by1kby8uL3NyYy9jcmVhdGVUb0RvLmpzIiwid2VicGFjazovL3RvLWRvLy4vc3JjL1VJLmpzIiwid2VicGFjazovL3RvLWRvLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vRmFjdG9yeSBmdW5jdGlvbiB0aGF0IGNyZWF0ZXMgdG8tZG8gb2JqZWN0c1xuZXhwb3J0IGNvbnN0IGNyZWF0ZVRvRG8gPSAodGl0bGUsIGRlc2MsIGR1ZURhdGUsIHByaW9yaXR5ID0gXCJpbXBvcnRhbnRcIiwgY29tcGxldGVkID0gZmFsc2UpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgICBpZCA6IERhdGUubm93KCksXG4gICAgICAgIHRpdGxlLFxuICAgICAgICBkZXNjLFxuICAgICAgICBkdWVEYXRlLFxuICAgICAgICBwcmlvcml0eSwgXG4gICAgICAgIGNvbXBsZXRlZFxuICAgIH1cbn07XG5cbi8vIE9iamVjdCB0aGF0IGhvbGRzIHByaW9yaXRpZXNcbmV4cG9ydCBjb25zdCBwcmlvcml0aWVzID0ge1xuICAgIFwidmVyeVwiOiBcInZlcnkgaW1wb3J0YW50XCIsXG4gICAgXCJpbXBvcnRhbnRcIjogXCJpbXBvcnRhbnRcIixcbiAgICBcIm5vdFwiOiBcIm5vdCBpbXBvcnRhbnRcIixcbn07XG5cbi8vIE9iaiB0aGF0IHN0b3JlcyB0by1kb3MgYXJyYXlzIGFuZCBwcm9qZWN0IG5hbWVzXG5cbmV4cG9ydCBjb25zdCB0b0Rvc09iaiA9IHtcbiAgICBcImRlZmF1bHRcIjogW10sXG4gICAgXCJob21lXCI6IFtdLFxuICAgIFwid29ya1wiOiBbXSxcbn07XG5cbi8vIEZ1bmN0aW9uIHRvIGFkZCB0by1kb3MgdG8gdG9Eb3Mgb2JqZWN0XG5cbmV4cG9ydCBjb25zdCBhZGRUb0RvT2JqID0gKHRvRG8sIHByb2plY3QgPSBcImRlZmF1bHRcIikgPT4ge1xuICAgIHRvRG9zT2JqW3Byb2plY3RdLnB1c2godG9Ebyk7XG4gICAgcmV0dXJuIHRvRG9zT2JqO1xufTtcblxuLy8gRnVuY3Rpb24gdG8gYWRkIG5ldyBwcm9qZWN0c1xuXG5leHBvcnQgY29uc3QgYWRkTmV3UHJvamVjdCA9IChwcm9qZWN0TmFtZSkgPT4ge1xuICAgIHRvRG9zT2JqW3Byb2plY3ROYW1lXSA9IFtdO1xuICAgIHJldHVybiB0b0Rvc09iajtcbn1cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbiIsImltcG9ydCB7IHRvRG9zT2JqLCBhZGROZXdQcm9qZWN0LCBhZGRUb0RvT2JqLCBjcmVhdGVUb0RvIH0gZnJvbSBcIi4vY3JlYXRlVG9Eb1wiO1xuXG4vL0Z1bmN0aW9uIHRvIGNyZWF0ZSB0aGUgZGl2IGluc2lkZSB0aGUgbWFpbiBwYXJ0IG9mIHRoZSBzY3JlZW5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVNYWluRGl2KCkge1xuICAgIGNvbnN0IG1haW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1haW5cIik7XG4gICAgY29uc3QgbWFpbkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgbWFpbkRpdi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcIm1haW5EaXZcIik7XG4gICAgbWFpbi5hcHBlbmRDaGlsZChtYWluRGl2KTtcbiAgICBcbiAgICByZXR1cm4geyBtYWluLCBtYWluRGl2IH1cbn07XG5cbi8vIEZ1bmN0aW9uIHRvIHJlbmRlciB0aGUgcHJvamVjdHMgdG8gdGhlIERPTSBhcyBidXR0b25zIChpbnRvIHRoZSBwcm9qZWN0cy1kaXYpLCBleHBvcnRlZCB0byB1c2UgaW4gaW5kZXguanNcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVCdXR0b25zRm9yRWFjaFByb2plY3RPblNpZGViYXIocHJvamVjdHMpIHtcbiAgICBjb25zdCBwcm9qZWN0c0RpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvamVjdHMtZGl2XCIpO1xuICAgIGNvbnN0IHByb2plY3RzS2V5cyA9IE9iamVjdC5rZXlzKHByb2plY3RzKTtcblxuICAgIC8vQ2xlYXIgb3V0IHRoZSBwcm9qZWN0cyBkaXYgZmlyc3QgQUxXQVlTIENMRUFSIE9VVCBCRUZPUkUgQURESU5HIE5FV1xuICAgIHByb2plY3RzRGl2LmlubmVySFRNTCA9IFwiXCI7XG4gICAgY29uc3QgcHJvamVjdEhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoM1wiKTtcbiAgICBwcm9qZWN0SGVhZGVyLnRleHRDb250ZW50ID0gXCJQcm9qZWN0c1wiO1xuXG4gICAgcHJvamVjdHNEaXYuYXBwZW5kQ2hpbGQocHJvamVjdEhlYWRlcik7XG5cbiAgICAvL0NyZWF0aW5nIGJ1dHRvbnMgZnJvbSB0b0Rvc09iaiBrZXlzXG4gICAgcHJvamVjdHNLZXlzLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0cy1saXN0LWJ1dHRvblwiKTtcbiAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0ga2V5O1xuICAgICAgICBwcm9qZWN0c0Rpdi5hcHBlbmRDaGlsZChidXR0b24pO1xuICAgIH0pO1xuXG4gICAgYWRkUHJvamVjdEJ1dHRvbihcIk5ldyBwcm9qZWN0ICtcIiwgcHJvamVjdHMpXG4gICAgcmV0dXJuIHByb2plY3RzRGl2O1xufTtcblxuLy8gRnVuY3Rpb24gdG8gY3JlYXRlIHRoZSBtYWluRGl2IGhlYWRlciB0aGF0IHNob3VsZCBiZSB1cGRhdGVkXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSGVhZGVyKG5hbWUpIHtcbiAgICBjb25zdCBtYWluID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYWluXCIpO1xuICAgIGNvbnN0IG1haW5IZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDFcIik7XG4gICAgbWFpbkhlYWRlci50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgbWFpbkhlYWRlci5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcIm1haW5IZWFkZXJcIik7XG4gICAgbWFpbi5hcHBlbmRDaGlsZChtYWluSGVhZGVyKTtcblxuICAgIHJldHVybiB7IG1haW4sIG1haW5IZWFkZXIgfTtcblxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGRpc3BsYXlQcm9qZWN0cyhwcm9qZWN0cykge1xuICAgIC8vIENob29zaW5nIGFsbCB0aGUgYnV0dG9ucyB3aXRoIHByb2plY3RuYW1lcyBcbiAgICBjb25zdCBidXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wcm9qZWN0cy1saXN0LWJ1dHRvblwiKTtcbiAgICAvLyBJdGVyYXRpbmcgdGhyb3VnaCB0aG9zZSBidXR0b25zXG4gICAgYnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgICAgIC8vIGFkZGluZyBjbGljayBldmVudCBsaXN0ZW5lcnMgdG8gdGhlbVxuICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgIC8vIHVwZGF0aW5nIHRoZSBoZWFkZXJcbiAgICAgICAgICAgIG1haW5IZWFkZXIudGV4dENvbnRlbnQgPSBidXR0b24udGV4dENvbnRlbnQ7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhwcm9qZWN0c1tidXR0b24udGV4dENvbnRlbnRdKTtcbiAgICAgICAgICAgIC8vIGNyZWF0aW5nIHRoZSBidXR0b24gdGhhdCBzaG93cyB1cCBhbiBpbnB1dCBmb3JtXG4gICAgICAgICAgICBhZGROZXdUb0RvQnRuKCk7XG4gICAgICAgICAgICAvLyBjcmVhdGluZyBhIHVsIGVsZW1lbnQgdG8gaG9sZCBhbGwgdGhlIHRvRG9zIGluc2lkZVxuICAgICAgICAgICAgY29uc3QgdWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidWxcIik7XG4gICAgICAgICAgICAvLyBpdGVyYXRpbmcgdGhyb3VnaCBlYWNoIHByb2plY3RzIGFycmF5IHRoYXQgaG9sZCB0b0RvIG9iamVjdHNcbiAgICAgICAgICAgIHByb2plY3RzW2J1dHRvbi50ZXh0Q29udGVudF0uZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICAvL2NyZWF0aW5nIGEgbGkgZWxlbWVudCB0byBob2xkIGVhY2ggdG9EbyBvYmplY3RzXG4gICAgICAgICAgICAgICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XG4gICAgICAgICAgICAgICAgbGkuY2xhc3NMaXN0LmFkZChcImxpLWVsZW1lbnRcIik7XG4gICAgICAgICAgICAgICAgLy8gaXRlcmF0aW5nIHRocm91Z2ggZWFjaCB0b0RvIG9iaiBrZXlcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhpdGVtKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBrZXkgZXF1YWxzIGRlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkgPT09IFwidGl0bGVcIiB8fCBrZXkgPT09IFwiZGVzY1wiIHx8IGtleSA9PT0gXCJkdWVEYXRlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSBhIHAgZWxlbWVudCB0byBob2xkIHRoZSB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBwdXR0aW5nIHRoZSB2YWx1ZSBvZiB0aGUga2V5IGluc2lkZSB0aGUgcCBlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICBwLmlubmVySFRNTCA9IGl0ZW1ba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFwcGVuZGluZyB0aGUgcCBlbGVtZW50IHdpdGggaW5mbyB0byB0aGUgbGkgZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgbGkuYXBwZW5kQ2hpbGQocCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC8vIGFwcGVuZGluZyB0aGUgbGkgZWxlbWVudCB0byB0aGUgcGFyZW50IHVsIGVsZW1lbnQgY3JlYXRlZCBvbiBsaW5lIDc4XG4gICAgICAgICAgICAgICAgdWwuYXBwZW5kQ2hpbGQobGkpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC8vIGNsZWFyaW5nIG91dCB0aGUgbWFpbiBkaXYgYmVmb3JlIHJlbmRlcmluZyB0aGUgY29udGVudCBpbnNpZGVcbiAgICAgICAgICAgIG1haW5EaXYuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgICAgIC8vYXBwZW5kaW5nIHRoZSB1bCBpbnNpZGUgdGhlIG1haW5EaXZcbiAgICAgICAgICAgIG1haW5EaXYuYXBwZW5kQ2hpbGQodWwpO1xuICAgICAgICAgICAgXG4gICAgICAgIH0pXG4gICAgfSlcbn07XG5cbmZ1bmN0aW9uIGFkZFByb2plY3RCdXR0b24oYnV0dG9uTmFtZSwgcHJvamVjdHMpIHtcbiAgICBjb25zdCBwcm9qZWN0c0RpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvamVjdHMtZGl2XCIpO1xuICAgIGNvbnN0IGFkZEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgYWRkQnV0dG9uLnRleHRDb250ZW50ID0gYnV0dG9uTmFtZTtcbiAgICBhZGRCdXR0b24uc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJhZGQtbmV3LXByb2plY3QtYnRuXCIpXG4gICAgXG4gICAgcHJvamVjdHNEaXYuYXBwZW5kQ2hpbGQoYWRkQnV0dG9uKTtcbiAgICBcbiAgICBhZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIpO1xuICAgICAgICBmb3JtLmNsYXNzTGlzdC5hZGQoXCJpbnB1dC1maWVsZFwiKTtcblxuICAgICAgICBjb25zdCBpbnB1dEZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgICBpbnB1dEZpZWxkLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0ZXh0XCIpO1xuICAgICAgICBpbnB1dEZpZWxkLnNldEF0dHJpYnV0ZShcImlkXCIsIFwicHJvamVjdC1pbnB1dFwiKTtcbiAgICAgICAgaW5wdXRGaWVsZC5zZXRBdHRyaWJ1dGUoXCJtYXhsZW5ndGhcIiwgXCIyNFwiKTtcbiAgICAgICAgaW5wdXRGaWVsZC5zZXRBdHRyaWJ1dGUoXCJwbGFjZWhvbGRlclwiLCBcIkVudGVyIHByb2plY3QgbmFtZVwiKTtcbiAgICAgICAgaW5wdXRGaWVsZC5zZXRBdHRyaWJ1dGUoXCJhdXRvY29tcGxldGVcIiwgXCJvZmZcIik7XG5cbiAgICAgICAgY29uc3QgYWRkUHJvamVjdEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgIGFkZFByb2plY3RCdXR0b24uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImJ1dHRvblwiKTtcbiAgICAgICAgYWRkUHJvamVjdEJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImFkZC1wcm9qZWN0LWJ0blwiKTtcbiAgICAgICAgYWRkUHJvamVjdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiQWRkXCI7XG5cbiAgICAgICAgY29uc3QgY2FuY2VsQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgY2FuY2VsQnV0dG9uLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJidXR0b25cIik7XG4gICAgICAgIGNhbmNlbEJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImNhbmNlbC1hZGQtcHJvamVjdC1idG5cIik7XG4gICAgICAgIGNhbmNlbEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiQ2FuY2VsXCI7XG4gICAgICAgIFxuICAgICAgICBmb3JtLmFwcGVuZENoaWxkKGlucHV0RmllbGQpO1xuICAgICAgICBmb3JtLmFwcGVuZENoaWxkKGFkZFByb2plY3RCdXR0b24pO1xuICAgICAgICBmb3JtLmFwcGVuZENoaWxkKGNhbmNlbEJ1dHRvbik7XG5cbiAgICAgICAgcHJvamVjdHNEaXYuYXBwZW5kQ2hpbGQoZm9ybSk7XG4gICAgICAgIFxuICAgICAgICBhZGRCdXR0b24uc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XG4gICAgICAgIGhhbmRsZU5ld1Byb2plY3RzKHByb2plY3RzKTtcbiAgICB9KVxuICAgIFxufTtcblxuZnVuY3Rpb24gaGFuZGxlTmV3UHJvamVjdHMocHJvamVjdHMpIHtcbiAgICBjb25zdCBhZGRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZC1wcm9qZWN0LWJ0blwiKTtcbiAgICBjb25zdCBjYW5jZWxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhbmNlbC1hZGQtcHJvamVjdC1idG5cIik7XG5cbiAgICBhZGRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgY29uc3QgaW5wdXR0ZWROYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0LWlucHV0XCIpLnZhbHVlO1xuICAgICAgICBhZGROZXdQcm9qZWN0KGlucHV0dGVkTmFtZSk7XG4gICAgICAgIGNvbnNvbGUudGFibGUodG9Eb3NPYmopO1xuICAgICAgICBjcmVhdGVCdXR0b25zRm9yRWFjaFByb2plY3RPblNpZGViYXIocHJvamVjdHMpO1xuICAgICAgICBkaXNwbGF5UHJvamVjdHMocHJvamVjdHMpO1xuICAgIFxuICAgIH0pO1xuICAgIFxuICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbnB1dC1maWVsZFwiKTtcbiAgICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtbmV3LXByb2plY3QtYnRuXCIpO1xuICAgICAgICBpZiAoZm9ybSkgZm9ybS5yZW1vdmUoKTtcbiAgICAgICAgYnV0dG9uLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xuXG4gICAgfSlcbn07XG5cbmZ1bmN0aW9uIGFkZE5ld1RvRG9CdG4oKSB7XG4gICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICBidXR0b24uc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJuZXctVG9Eby1idG5cIik7XG4gICAgYnV0dG9uLnRleHRDb250ZW50ID0gXCJhZGRcIjtcbiAgICBtYWluLmFwcGVuZENoaWxkKGJ1dHRvbik7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIG5ld0Rpdi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImlucHV0LURpdlwiKTtcbiAgICAgICAgbWFpbi5hcHBlbmRDaGlsZChuZXdEaXYpO1xuXG4gICAgICAgIGNyZWF0ZUVsQW5kQXBwZW5kKFwiaW5wdXQtRGl2XCIsIFwiZm9ybVwiLCB7XG4gICAgICAgICAgICBcImlkXCI6IFwiaW5wdXQtZm9ybVwiXG4gICAgICAgIH0pO1xuXG4gICAgICAgIFxuICAgICAgICBjb25zdCB0aXRsZUxhYmVsID0gY3JlYXRlRWxBbmRBcHBlbmQoXCJpbnB1dC1mb3JtXCIsIFwibGFiZWxcIiwge1xuICAgICAgICAgICAgXCJmb3JcIjogXCJ0aXRsZS1pbnB1dFwiLFxuXG4gICAgICAgIH0pO1xuICAgICAgICB0aXRsZUxhYmVsLnRleHRDb250ZW50ID0gXCJUaXRsZVwiO1xuXG4gICAgICAgIFxuICAgICAgICBjcmVhdGVFbEFuZEFwcGVuZChcImlucHV0LWZvcm1cIiwgXCJpbnB1dFwiLCB7ICAvL1RpdGxlIGlucHV0XG4gICAgICAgICAgICBcInR5cGVcIjogXCJ0ZXh0XCIsXG4gICAgICAgICAgICBcImlkXCI6IFwidGl0bGUtaW5wdXRcIlxuICAgICAgICB9KTtcblxuICAgICAgIFxuICAgICAgICBjb25zdCBkZXNjTGFiZWwgPSBjcmVhdGVFbEFuZEFwcGVuZChcImlucHV0LWZvcm1cIiwgXCJsYWJlbFwiLCB7XG4gICAgICAgICAgICBcImZvclwiOiBcImRlc2MtaW5wdXRcIlxuICAgICAgICB9KTtcbiAgICAgICAgZGVzY0xhYmVsLnRleHRDb250ZW50ID0gXCJEZXNjcmlwdGlvblwiO1xuXG4gICAgICAgIFxuICAgICAgICBjcmVhdGVFbEFuZEFwcGVuZChcImlucHV0LWZvcm1cIiwgXCJ0ZXh0YXJlYVwiLCB7XG4gICAgICAgICAgICBcImlkXCI6IFwiZGVzYy1pbnB1dFwiLFxuICAgICAgICAgICAgXCJyb3dzXCI6IFwiNVwiXG4gICAgICAgIH0pO1xuXG4gICAgICAgIFxuICAgICAgICBjb25zdCBkYXRlTGFiZWwgPSBjcmVhdGVFbEFuZEFwcGVuZChcImlucHV0LWZvcm1cIiwgXCJsYWJlbFwiLCB7XG4gICAgICAgICAgICBcImZvclwiOiBcImR1ZURhdGVcIlxuICAgICAgICB9KTtcbiAgICAgICAgZGF0ZUxhYmVsLnRleHRDb250ZW50ID0gXCJEdWUgZGF0ZVwiO1xuXG4gICAgICAgIGNyZWF0ZUVsQW5kQXBwZW5kKFwiaW5wdXQtZm9ybVwiLCBcImlucHV0XCIsIHtcbiAgICAgICAgICAgIFwidHlwZVwiOiBcImRhdGVcIixcbiAgICAgICAgICAgIFwiaWRcIjogXCJkdWVEYXRlXCIsXG4gICAgICAgICAgICAvL3JlcXVpcmVkXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHByaW9yaXR5TGFiZWwgPSBjcmVhdGVFbEFuZEFwcGVuZChcImlucHV0LWZvcm1cIiwgXCJsYWJlbFwiLCB7XG4gICAgICAgICAgICBcImZvclwiOiBcInByaW9yaXR5XCJcbiAgICAgICAgfSk7XG4gICAgICAgIHByaW9yaXR5TGFiZWwudGV4dENvbnRlbnQgPSBcIlByaW9yaXR5XCI7XG5cbiAgICAgICAgY3JlYXRlRWxBbmRBcHBlbmQoXCJpbnB1dC1mb3JtXCIsIFwic2VsZWN0XCIsIHtcbiAgICAgICAgICAgIFwiaWRcIjogXCJwcmlvcml0eVwiXG4gICAgICAgIH0pXG5cbiAgICAgICAgY29uc3QgdmVyeSA9IGNyZWF0ZUVsQW5kQXBwZW5kKFwicHJpb3JpdHlcIiwgXCJvcHRpb25cIiwge1xuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBcInZlcnlcIixcblxuICAgICAgICB9KTtcbiAgICAgICAgdmVyeS50ZXh0Q29udGVudCA9IFwiVmVyeSBJbXBvcnRhbnRcIjtcblxuICAgICAgICBjb25zdCBpbXBvcnRhbnQgPSBjcmVhdGVFbEFuZEFwcGVuZChcInByaW9yaXR5XCIsIFwib3B0aW9uXCIsIHtcbiAgICAgICAgICAgIFwidmFsdWVcIjogXCJpbXBvcnRhbnRcIixcblxuICAgICAgICB9KTtcbiAgICAgICAgaW1wb3J0YW50LnRleHRDb250ZW50ID0gXCJJbXBvcnRhbnRcIjtcblxuICAgICAgICBjb25zdCBub3QgPSBjcmVhdGVFbEFuZEFwcGVuZChcInByaW9yaXR5XCIsIFwib3B0aW9uXCIsIHtcbiAgICAgICAgICAgIFwidmFsdWVcIjogXCJub3RcIixcblxuICAgICAgICB9KTtcbiAgICAgICAgbm90LnRleHRDb250ZW50ID0gXCJOb3QgSW1wb3J0YW50XCI7XG5cbiAgICAgICAgLy8gY3JlYXRpbmcgdHdvIGJ1dHRvbnMgXG5cbiAgICAgICAgY29uc3QgYWRkQnV0dG9uID0gY3JlYXRlRWxBbmRBcHBlbmQoXCJpbnB1dC1mb3JtXCIsIFwiYnV0dG9uXCIsIHtcbiAgICAgICAgICAgIFwiaWRcIjogXCJhZGRUb0RvQnRuXCIsXG4gICAgICAgICAgICBcInR5cGVcIjogXCJidXR0b25cIlxuICAgICAgICB9KTtcbiAgICAgICAgYWRkQnV0dG9uLnRleHRDb250ZW50ID0gXCJBZGQgVG8tZG9cIjtcblxuICAgICAgICBjb25zdCBjYW5jZWxCdG4gPSBjcmVhdGVFbEFuZEFwcGVuZChcImlucHV0LWZvcm1cIiwgXCJidXR0b25cIiwge1xuICAgICAgICAgICAgXCJpZFwiOiBcImNhbmNlbEJ0blwiLFxuICAgICAgICAgICAgXCJ0eXBlXCI6IFwiYnV0dG9uXCJcbiAgICAgICAgfSk7XG4gICAgICAgIGNhbmNlbEJ0bi50ZXh0Q29udGVudCA9IFwiQ2FuY2VsXCI7XG4gICAgICAgIFxuICAgICAgICBoYW5kbGVCdXR0b25zKCk7XG5cbiAgICB9KTtcblxuICAgIFxufTtcblxuZnVuY3Rpb24gaGFuZGxlQnV0dG9ucygpIHtcbiAgICBjb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZFRvRG9CdG5cIik7XG4gICAgY29uc3QgY2FuY2VsQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW5jZWxCdG5cIik7XG5cbiAgICBjb25zdCB0aXRsZVZhbHVlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aXRsZS1pbnB1dFwiKS52YWx1ZTtcbiAgICBjb25zdCBkZXNjVmFsdWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlc2MtaW5wdXRcIikudmFsdWU7XG4gICAgY29uc3QgZHVlRGF0ZVZhbHVlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkdWVEYXRlXCIpLnZhbHVlO1xuICAgIGNvbnN0IHByaW9yaXR5VmFsdWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByaW9yaXR5XCIpLnZhbHVlO1xuICAgIGNvbnN0IHByb2plY3RWYWx1ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFpbkhlYWRlclwiKS52YWx1ZTtcblxuXG4gICAgYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGFkZFRvRG9PYmooY3JlYXRlVG9Ebyh0aXRsZVZhbHVlLCBkZXNjVmFsdWUsIGR1ZURhdGVWYWx1ZSwgcHJpb3JpdHlWYWx1ZSksIHByb2plY3RWYWx1ZSk7XG4gICAgICAgIFxuICAgIH0pO1xufTtcblxuXG5cbi8vaGVscGVyIGZ1bmN0aW9uIHRvIGNyZWF0ZSBlbGVtZW50cyBhbmQgYXBwZW5kIHRoZW0gdG8gdGhlIHBhcmVudCBlbGVtZW50XG5mdW5jdGlvbiBjcmVhdGVFbEFuZEFwcGVuZChwYXJlbnRFbElkLCB0eXBlLCBhdHRyaWJ1dGVzKSB7IFxuICAgIGxldCBuZXdFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodHlwZSk7XG4gICAgXG4gICAgZm9yIChsZXQga2V5IGluIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgaWYgKGF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgbmV3RWwuc2V0QXR0cmlidXRlKGtleSwgYXR0cmlidXRlc1trZXldKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBsZXQgcGFyZW50RWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwYXJlbnRFbElkKTtcblxuICAgIHBhcmVudEVsLmFwcGVuZENoaWxkKG5ld0VsKTtcbiAgICBcbiAgICByZXR1cm4gbmV3RWw7XG59O1xuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuIiwiaW1wb3J0IHsgY3JlYXRlVG9EbywgcHJpb3JpdGllcywgdG9Eb3NPYmosIGFkZFRvRG9PYmogfSBmcm9tIFwiLi9jcmVhdGVUb0RvXCI7XG5pbXBvcnQgeyBjcmVhdGVNYWluRGl2LCBjcmVhdGVCdXR0b25zRm9yRWFjaFByb2plY3RPblNpZGViYXIsIGNyZWF0ZUhlYWRlciwgZGlzcGxheVByb2plY3RzIH0gZnJvbSBcIi4vVUlcIjtcbi8vIGltcG9ydCB7IGFsZXJ0RGF0ZSB9IGZyb20gXCIuL2RhdGVzXCI7XG5cbi8vIGNyZWF0aW5nIHRocmVlIG5ldyB0b2RvcyB3aXRoIGNyZWF0ZVRvRG8gZnVuY3Rpb25cbmNvbnN0IG5ld0RvID0gY3JlYXRlVG9EbyhcIk1pbGtcIiwgXCJCdXkgc29tZSBtaWxrIGZvciB0aGUgY2F0XCIsIFwiMTItMDItMjAyNFwiLCBwcmlvcml0aWVzLnZlcnkpO1xuY29uc3QgYW5vdGhlckRvID0gY3JlYXRlVG9EbyhcIldyaXRpbmdcIiwgXCJXcml0ZSBzb21lIHRleHQgdG8gbXkgYm9va1wiLCBcIjE0LTA0LTIwMjRcIiwgcHJpb3JpdGllcy5ub3QsIHRydWUpO1xuY29uc3QgdGhpcmRUb0RvID0gY3JlYXRlVG9EbyhcIkJ1eSBjYXQgZm9vZFwiLCBcIkJ1eSBzb21lIGtpdGVrYXRcIiwgXCIwNC0wNS0yMDI0XCIsIHByaW9yaXRpZXMudmVyeSk7XG5cblxuLy8gYWRkaW5nIHByZXZpb3VzbHkgY3JlYXRlZCB0b2RvcyB0byB0aGUgb2JqZWN0IGhvbGRpbmcgdG9kb3Mgd2l0aCB0aGUgYWRkVG9Eb09iaiBmdW5jdGlvblxuYWRkVG9Eb09iaihuZXdEbyk7XG5hZGRUb0RvT2JqKGFub3RoZXJEby8qLCBlLmcuIGhvbWUqLyk7IC8vIG9wdGlvbmFsIGFyZ3VtZW50IHRoYXQgc3BlY2lmaWVzIHRoZSBwcm9qZWN0IHRvIHB1dCB0aGUgdG8tZG8gaW50b1xuYWRkVG9Eb09iaih0aGlyZFRvRG8pO1xuXG5cbihmdW5jdGlvbiBjcmVhdGVQYWdlKCkge1xuICAgIGNyZWF0ZUhlYWRlcihcIkxpa2EgaSB5YVwiKTtcbiAgICBjcmVhdGVNYWluRGl2KCk7XG4gICAgY3JlYXRlQnV0dG9uc0ZvckVhY2hQcm9qZWN0T25TaWRlYmFyKHRvRG9zT2JqKTtcbiAgICBkaXNwbGF5UHJvamVjdHModG9Eb3NPYmopO1xufSkoKTsiXSwibmFtZXMiOlsiY3JlYXRlVG9EbyIsInRpdGxlIiwiZGVzYyIsImR1ZURhdGUiLCJwcmlvcml0eSIsImNvbXBsZXRlZCIsImlkIiwiRGF0ZSIsIm5vdyIsInByaW9yaXRpZXMiLCJ0b0Rvc09iaiIsImFkZFRvRG9PYmoiLCJ0b0RvIiwicHJvamVjdCIsInB1c2giLCJkaXNwbGF5UHJvamVjdHMiLCJwcm9qZWN0cyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJidXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwibWFpbkhlYWRlciIsInRleHRDb250ZW50IiwiY29uc29sZSIsImxvZyIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJtYWluIiwiYXBwZW5kQ2hpbGQiLCJuZXdEaXYiLCJjcmVhdGVFbEFuZEFwcGVuZCIsImFkZEJ1dHRvbiIsImdldEVsZW1lbnRCeUlkIiwidGl0bGVWYWx1ZSIsInZhbHVlIiwiZGVzY1ZhbHVlIiwiZHVlRGF0ZVZhbHVlIiwicHJpb3JpdHlWYWx1ZSIsInByb2plY3RWYWx1ZSIsImhhbmRsZUJ1dHRvbnMiLCJhZGROZXdUb0RvQnRuIiwidWwiLCJpdGVtIiwibGkiLCJjbGFzc0xpc3QiLCJhZGQiLCJPYmplY3QiLCJrZXlzIiwia2V5IiwicCIsImlubmVySFRNTCIsIm1haW5EaXYiLCJwYXJlbnRFbElkIiwidHlwZSIsImF0dHJpYnV0ZXMiLCJuZXdFbCIsImhhc093blByb3BlcnR5IiwibmV3RG8iLCJhbm90aGVyRG8iLCJ0aGlyZFRvRG8iLCJuYW1lIiwiY3JlYXRlSGVhZGVyIiwiY3JlYXRlTWFpbkRpdiIsImNyZWF0ZUJ1dHRvbnNGb3JFYWNoUHJvamVjdE9uU2lkZWJhciIsInByb2plY3RzRGl2IiwicXVlcnlTZWxlY3RvciIsInByb2plY3RzS2V5cyIsInByb2plY3RIZWFkZXIiLCJidXR0b25OYW1lIiwiZm9ybSIsImlucHV0RmllbGQiLCJhZGRQcm9qZWN0QnV0dG9uIiwiY2FuY2VsQnV0dG9uIiwiYWRkQnRuIiwiY2FuY2VsQnRuIiwiaW5wdXR0ZWROYW1lIiwidGFibGUiLCJyZW1vdmUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJoYW5kbGVOZXdQcm9qZWN0cyJdLCJzb3VyY2VSb290IjoiIn0=