(()=>{"use strict";const t=(t,e,n,o="important",d=!1)=>({id:Date.now(),title:t,desc:e,dueDate:n,priority:o,completed:d}),e={Default:[],Home:[],Work:[]},n=(t,n="Default")=>(e[n].push(t),e);function o(t,e=null,n=null){const o=document.createElement("ul");function d(e){const n=document.createElement("li");n.classList.add("li-element");for(const t in e)if(["title","desc","dueDate"].includes(t)){const o=document.createElement("p");o.textContent=e[t],n.appendChild(o)}const d=document.createElement("button");d.textContent="Delete",d.addEventListener("click",(()=>{const o=Object.values(t).find((t=>t.includes(e)));if(o){const t=o.indexOf(e);o.splice(t,1),n.remove()}})),n.appendChild(d),o.appendChild(n)}if(e||n)e&&!n&&t[e]&&t[e].forEach((t=>{d(t)}));else for(const e in t)t[e].forEach((t=>{d(t)}));return console.log("test2 working!"),o}function d(t){const e=document.querySelectorAll(".projects-list-button"),n=document.querySelector("#mainDiv"),d=document.getElementById("mainHeader");e.forEach((e=>{e.addEventListener("click",(()=>{const c=o(t,e.textContent,null);n.innerHTML="",n.appendChild(c),d.textContent=e.textContent}))}))}function c(t,e,n){let o=document.createElement(e);for(let t in n)n.hasOwnProperty(t)&&o.setAttribute(t,n[t]);return document.getElementById(t).appendChild(o),o}const i=t("Milk","Buy some milk for the cat","12-02-2024","very important"),l=t("Writing","Write some text to my book","14-04-2024","not important",!0),u=t("Buy cat food","Buy some kitekat","04-05-2024","very important");n(i),n(l),n(u),c("to-dos-div","button",{type:"button",id:"all-to-dos"}).textContent="All",c("to-dos-div","button",{type:"button",id:"today-to-dos"}).textContent="Today",c("to-dos-div","button",{type:"button",id:"next-week-to-dos"}).textContent="Next week",function(t){const e=document.getElementById("all-to-dos"),n=(document.getElementById("today-to-dos"),document.getElementById("next-week-to-dos"),document.getElementById("mainDiv")),d=document.getElementById("mainHeader");document.getElementById("new-ToDo-btn"),e.addEventListener("click",(()=>{const c=o(t,null,null);n.innerHTML="",n.appendChild(c),d.textContent=e.textContent}))}(e),function t(n){const o=document.querySelector("#projects-div"),i=Object.keys(n);o.innerHTML="";const l=document.createElement("h3");return l.textContent="Projects",o.appendChild(l),i.forEach((t=>{const e=document.createElement("button");e.classList.add("projects-list-button"),e.textContent=t,o.appendChild(e)})),function(n,o){const i=document.querySelector("#projects-div"),l=document.createElement("button");l.textContent="New project +",l.setAttribute("id","add-new-project-btn"),i.appendChild(l),l.addEventListener("click",(()=>{const n=document.createElement("form");n.classList.add("input-field"),n.setAttribute("id","input-field"),i.appendChild(n),c("input-field","input",{type:"text",id:"project-input","max-length":"24",placeholder:"Enter project name",autocomplete:"off"}),c("input-field","button",{type:"button",id:"add-project-btn"}).textContent="Add",c("input-field","button",{type:"button",id:"cancel-add-project-btn"}).textContent="Cancel",l.setAttribute("disabled",!0),function(n){const o=document.getElementById("add-project-btn"),c=document.querySelector("#cancel-add-project-btn");o.addEventListener("click",(()=>{const o=document.getElementById("project-input").value;e[o]=[],console.table(e),t(n),d(n)})),c.addEventListener("click",(()=>{const t=document.querySelector(".input-field"),e=document.querySelector("#add-new-project-btn");t&&t.remove(),e.removeAttribute("disabled")}))}(o)}))}(0,n),o}(e),d(e)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWtCLGNBQWUsUUFBUyxDQUN6RCxLQUFRLE9BQ1IsR0FBTSxnQkFDTixhQUFjLEtBQ2QsWUFBZSxxQkFDZixhQUFnQixRQUlLQSxFQUFrQixjQUFlLFNBQVUsQ0FDaEUsS0FBUSxTQUNSLEdBQU0sb0JBR08xQixZQUFjLE1BRVYwQixFQUFrQixjQUFlLFNBQVUsQ0FDNUQsS0FBUSxTQUNSLEdBQU0sMkJBRUcxQixZQUFjLFNBSTNCNEMsRUFBVVosYUFBYSxZQUFZLEdBTTNDLFNBQTJCZixHQUN2QixNQUFNNkIsRUFBU3ZELFNBQVNnQyxlQUFlLG1CQUNqQ3dCLEVBQVl4RCxTQUFTOEIsY0FBYywyQkFFekN5QixFQUFPM0MsaUJBQWlCLFNBQVMsS0FDN0IsTUFBTTZDLEVBQWV6RCxTQUFTZ0MsZUFBZSxpQkFBaUIwQixNRnpEbEVsRSxFRTBEa0JpRSxHRjFETSxHRTJEcEJsQyxRQUFRb0MsTUFBTW5FLEdBQ2R1RCxFQUFxQ3JCLEdBQ3JDRCxFQUFnQkMsRUFBUyxJQUk3QjhCLEVBQVU1QyxpQkFBaUIsU0FBUyxLQUNoQyxNQUFNMEMsRUFBT3RELFNBQVM4QixjQUFjLGdCQUM5QkcsRUFBU2pDLFNBQVM4QixjQUFjLHdCQUNsQ3dCLEdBQU1BLEVBQUtsQyxTQUNmYSxFQUFPMkIsZ0JBQWdCLFdBQVcsR0FHMUMsQ0F6QlFDLENBQWtCbkMsRUFBUyxHQUduQyxDQWxFSW9DLENBQWlCLEVBQWlCcEMsR0FDM0JzQixDQUNYLENDUElELENBQXFDdkQsR0FDckNpQyxFQUFnQmpDLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90by1kby8uL3NyYy9jcmVhdGVUb0RvLmpzIiwid2VicGFjazovL3RvLWRvLy4vc3JjL3Rlc3QyLmpzIiwid2VicGFjazovL3RvLWRvLy4vc3JjL1VJLmpzIiwid2VicGFjazovL3RvLWRvLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlxuXG4vL0ZhY3RvcnkgZnVuY3Rpb24gdGhhdCBjcmVhdGVzIHRvLWRvIG9iamVjdHNcbmV4cG9ydCBjb25zdCBjcmVhdGVUb0RvID0gKHRpdGxlLCBkZXNjLCBkdWVEYXRlLCBwcmlvcml0eSA9IFwiaW1wb3J0YW50XCIsIGNvbXBsZXRlZCA9IGZhbHNlKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaWQgOiBEYXRlLm5vdygpLFxuICAgICAgICB0aXRsZSxcbiAgICAgICAgZGVzYyxcbiAgICAgICAgZHVlRGF0ZSxcbiAgICAgICAgcHJpb3JpdHksIFxuICAgICAgICBjb21wbGV0ZWRcbiAgICB9XG59O1xuXG5cbi8vIE9iaiB0aGF0IHN0b3JlcyB0by1kb3MgYXJyYXlzIGFuZCBwcm9qZWN0IG5hbWVzXG5cbmV4cG9ydCBjb25zdCB0b0Rvc09iaiA9IHtcbiAgICBcIkRlZmF1bHRcIjogW10sXG4gICAgXCJIb21lXCI6IFtdLFxuICAgIFwiV29ya1wiOiBbXSxcbn07XG5cbi8vIEZ1bmN0aW9uIHRvIGFkZCB0by1kb3MgdG8gdG9Eb3Mgb2JqZWN0XG5cbmV4cG9ydCBjb25zdCBhZGRUb0RvT2JqID0gKHRvRG8sIHByb2plY3QgPSBcIkRlZmF1bHRcIikgPT4ge1xuICAgIHRvRG9zT2JqW3Byb2plY3RdLnB1c2godG9Ebyk7XG4gICAgcmV0dXJuIHRvRG9zT2JqO1xufTtcblxuLy8gRnVuY3Rpb24gdG8gZGVsZXRlIGEgdG8tZG9cblxuZXhwb3J0IGNvbnN0IGRlbGV0ZVRvRG8gPSAoaW5kZXgsIHByb2plY3QpID0+IHtcbiAgICB0b0Rvc09ialtwcm9qZWN0XS5zcGxpY2UoaW5kZXgsIDEpXG4gICAgcmV0dXJuIHRvRG9zT2JqO1xufVxuXG4vLyBGdW5jdGlvbiB0byBhZGQgbmV3IHByb2plY3RzXG5cbmV4cG9ydCBjb25zdCBhZGROZXdQcm9qZWN0ID0gKHByb2plY3ROYW1lKSA9PiB7XG4gICAgdG9Eb3NPYmpbcHJvamVjdE5hbWVdID0gW107XG4gICAgcmV0dXJuIHRvRG9zT2JqO1xufVxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuIiwiZXhwb3J0IGZ1bmN0aW9uIHRlc3QyKG9iaiwgcHJvamVjdCA9IG51bGwsIGRhdGUgPSBudWxsKSB7XG4gICAgLy8gY3JlYXRpbmcgdGhlIHVsIHRvIGhvbGQgYWxsIHRoZSBsaSdzIGFuZCByZXR1cm4gYXQgdGhlIGVuZCBvZiB0aGUgZnVuY3Rpb25cbiAgICBjb25zdCB1bCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ1bFwiKTtcbiAgICAvLyBoZWxwZXIgZnVuY3Rpb24gdGhhdCB3aWxsIGNyZWF0ZSBsaSdzIFxuICAgIGZ1bmN0aW9uIGNyZWF0ZUxpKHRvRG8pIHtcbiAgICAgICAgLy8gY3JlYXRpbmcgdGhlIGxpXG4gICAgICAgIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xuICAgICAgICBsaS5jbGFzc0xpc3QuYWRkKFwibGktZWxlbWVudFwiKTtcbiAgICAgICAgLy8gbG9vcGluZyB0aHJvdWdoIHRoZSB0b0RvIG9iaiB0aGF0IGlzIHBhc3NlZCBhcyB0aGUgYXJndW1lbnQgXG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRvRG8pIHtcbiAgICAgICAgICAgIC8vIGlmIHRoZSBrZXkgaXMgdGl0bGUsIGRlc2MsIG9yIGR1ZURhdGVcbiAgICAgICAgICAgIGlmIChbXCJ0aXRsZVwiLCBcImRlc2NcIiwgXCJkdWVEYXRlXCJdLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgICAgICAgICAvLyBjcmVhdGUgYSBwIGVsZW1lbnQgdG8gaG9sZCB0aGUgaW5mb1xuICAgICAgICAgICAgICAgIGNvbnN0IHAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgICAgICAgICAgICAvLyBwdXR0aW5nIHRoZSBpbmZvIGZyb20gdGhlIGFib3ZlIGludG8gdGhlIHBcbiAgICAgICAgICAgICAgICBwLnRleHRDb250ZW50ID0gdG9Eb1trZXldO1xuICAgICAgICAgICAgICAgIC8vYXBwZW5kaW5nIHRoZSBwcyBhcyB0aGUgbGkncyBjaGlsZFxuICAgICAgICAgICAgICAgIGxpLmFwcGVuZENoaWxkKHApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgIGRlbGV0ZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiRGVsZXRlXCI7XG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgLy8gZmluZCB0aGUgcHJvamVjdCB0aGF0IGNvbnRhaW5zIHRoZSB0b0RvIGl0ZW1cbiAgICAgICAgICAgIGNvbnN0IHRhcmdldFByb2plY3QgPSBPYmplY3QudmFsdWVzKG9iaikuZmluZChwcm9qZWN0ID0+IHByb2plY3QuaW5jbHVkZXModG9EbykpO1xuICAgICAgICAgICAgaWYgKHRhcmdldFByb2plY3QpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHRhcmdldFByb2plY3QuaW5kZXhPZih0b0RvKTtcbiAgICAgICAgICAgICAgICB0YXJnZXRQcm9qZWN0LnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgLy91bC5yZW1vdmVDaGlsZChsaSk7XG4gICAgICAgICAgICAgICAgbGkucmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBsaS5hcHBlbmRDaGlsZChkZWxldGVCdXR0b24pO1xuXG4gICAgICAgIFxuICAgICAgICAvLyBhcHBlbmRpbmQgdGhlIGxpIHRvIHRoZSB1bFxuICAgICAgICB1bC5hcHBlbmRDaGlsZChsaSk7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIGNoZWNraW5nIHRoZSBjb25kaXRpb25zIGFuZCBhZGRpbmcgdGhlIHRvRG9zIGFjY29yZGluZ2x5XG5cbiAgICAvLyBpZiBubyBwcm9qZWN0IG9yIGRhdGUgc3BlY2lmaWVkXG4gICAgaWYgKCFwcm9qZWN0ICYmICFkYXRlKSB7XG4gICAgICAgIC8vIGxvb3AgdGhyb3VnaCBhbGwgdGhlIHByb2plY3QgbmFtZXMgaW4gdGhlIG9iamVjdFxuICAgICAgICBmb3IgKGNvbnN0IHByb2plY3ROYW1lcyBpbiBvYmopIHtcbiAgICAgICAgICAgIC8vIGVudGVyIGVhY2ggcHJvamVjdCBhbmQgbG9vcCBhbGwgdGhlIHRvZG8gb2JqZWN0cyBpbiBpdFxuICAgICAgICAgICAgb2JqW3Byb2plY3ROYW1lc10uZm9yRWFjaCh0b0RvID0+IHtcbiAgICAgICAgICAgICAgICAvLyBjYWxsIHRoZSBhYm92ZSBjcmVhdGVkIGZ1bmN0aW9uIHdpdGggdGhlIHRvRG8gcGFzc2VkIGFzIHRoZSBhcmd1bWVudFxuICAgICAgICAgICAgICAgIGNyZWF0ZUxpKHRvRG8pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICBcbiAgICAvLyBpZiBvbmx5IHRoZSBwcm9qZWN0IGlzIHNwZWNpZmllZCBhbmQgbm8gZGF0ZVxuICAgIH0gZWxzZSBpZiAocHJvamVjdCAmJiAhZGF0ZSkge1xuICAgICAgICAvL2NoZWNrIGlmIHRoZSBwcm9qZWN0IHBhc3NlZCBhcyB0aGUgYXJndW1lbnQgaXMgaW4gdGhlIGxpc3QgXG4gICAgICAgIGlmIChvYmpbcHJvamVjdF0pIHtcbiAgICAgICAgICAgIC8vIGlmIGl0IGlzIGxvb3AgdGhyb3VnaCBhbGwgdGhlIHRvRG8gb2JqZWN0cyBpbiB0aGUgcHJvamVjdFxuICAgICAgICAgICAgb2JqW3Byb2plY3RdLmZvckVhY2godG9EbyA9PiB7XG4gICAgICAgICAgICAgICAgLy8gYW5kIGNyZWF0ZSBsaSdzIHdpdGggdGhvc2UgdG9kb3NcbiAgICAgICAgICAgICAgICBjcmVhdGVMaSh0b0RvKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coXCJ0ZXN0MiB3b3JraW5nIVwiKTtcbiAgICByZXR1cm4gdWw7XG59O1xuXG5cblxuIiwiaW1wb3J0IHsgdG9Eb3NPYmosIGFkZE5ld1Byb2plY3QsIGFkZFRvRG9PYmosIGNyZWF0ZVRvRG8sIGRlbGV0ZVRvRG8gfSBmcm9tIFwiLi9jcmVhdGVUb0RvXCI7XG5pbXBvcnQgeyBmb3JtYXQgfSBmcm9tIFwiZGF0ZS1mbnNcIjtcbmltcG9ydCB7IHRlc3QyIH0gZnJvbSBcIi4vdGVzdDJcIjtcblxuLy8gRnVuY3Rpb24gdG8gcmVuZGVyIHRoZSBwcm9qZWN0cyB0byB0aGUgRE9NIGFzIGJ1dHRvbnMgKGludG8gdGhlIHByb2plY3RzLWRpdiksIGV4cG9ydGVkIHRvIHVzZSBpbiBpbmRleC5qc1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUJ1dHRvbnNGb3JFYWNoUHJvamVjdE9uU2lkZWJhcihwcm9qZWN0cykge1xuICAgIGNvbnN0IHByb2plY3RzRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9qZWN0cy1kaXZcIik7XG4gICAgY29uc3QgcHJvamVjdHNLZXlzID0gT2JqZWN0LmtleXMocHJvamVjdHMpO1xuXG4gICAgLy9DbGVhciBvdXQgdGhlIHByb2plY3RzIGRpdiBmaXJzdCBBTFdBWVMgQ0xFQVIgT1VUIEJFRk9SRSBBRERJTkcgTkVXXG4gICAgcHJvamVjdHNEaXYuaW5uZXJIVE1MID0gXCJcIjtcbiAgICBjb25zdCBwcm9qZWN0SGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgzXCIpO1xuICAgIHByb2plY3RIZWFkZXIudGV4dENvbnRlbnQgPSBcIlByb2plY3RzXCI7XG5cbiAgICBwcm9qZWN0c0Rpdi5hcHBlbmRDaGlsZChwcm9qZWN0SGVhZGVyKTtcblxuICAgIC8vQ3JlYXRpbmcgYnV0dG9ucyBmcm9tIHRvRG9zT2JqIGtleXNcbiAgICBwcm9qZWN0c0tleXMuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZChcInByb2plY3RzLWxpc3QtYnV0dG9uXCIpO1xuICAgICAgICBidXR0b24udGV4dENvbnRlbnQgPSBrZXk7XG4gICAgICAgIHByb2plY3RzRGl2LmFwcGVuZENoaWxkKGJ1dHRvbik7XG4gICAgfSk7XG5cbiAgICBhZGRQcm9qZWN0QnV0dG9uKFwiTmV3IHByb2plY3QgK1wiLCBwcm9qZWN0cylcbiAgICByZXR1cm4gcHJvamVjdHNEaXY7XG59O1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBkaXNwbGF5UHJvamVjdHMocHJvamVjdHMpIHtcbiAgICBjb25zdCBidXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wcm9qZWN0cy1saXN0LWJ1dHRvblwiKTtcbiAgICBjb25zdCBtYWluRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtYWluRGl2XCIpO1xuICAgIGNvbnN0IGgxID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYWluSGVhZGVyXCIpO1xuXG4gICAgYnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdWwgPSB0ZXN0Mihwcm9qZWN0cywgYnV0dG9uLnRleHRDb250ZW50LCBudWxsKTtcbiAgICAgICAgICAgIG1haW5EaXYuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgICAgIG1haW5EaXYuYXBwZW5kQ2hpbGQodWwpO1xuICAgICAgICAgICAgaDEudGV4dENvbnRlbnQgPSBidXR0b24udGV4dENvbnRlbnQ7XG5cbiAgICAgICAgfSlcbiAgICB9KVxufVxuXG5cblxuXG5mdW5jdGlvbiBhZGRQcm9qZWN0QnV0dG9uKGJ1dHRvbk5hbWUsIHByb2plY3RzKSB7XG4gICAgY29uc3QgcHJvamVjdHNEaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3RzLWRpdlwiKTtcbiAgICBjb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIGFkZEJ1dHRvbi50ZXh0Q29udGVudCA9IGJ1dHRvbk5hbWU7XG4gICAgYWRkQnV0dG9uLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiYWRkLW5ldy1wcm9qZWN0LWJ0blwiKVxuICAgIFxuICAgIHByb2plY3RzRGl2LmFwcGVuZENoaWxkKGFkZEJ1dHRvbik7XG4gICAgXG4gICAgYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZm9ybVwiKTtcbiAgICAgICAgZm9ybS5jbGFzc0xpc3QuYWRkKFwiaW5wdXQtZmllbGRcIik7ICBcbiAgICAgICAgZm9ybS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImlucHV0LWZpZWxkXCIpO1xuICAgICAgICBwcm9qZWN0c0Rpdi5hcHBlbmRDaGlsZChmb3JtKTtcblxuICAgICAgICBjb25zdCBpbnB1dEZpZWxkID0gY3JlYXRlRWxBbmRBcHBlbmQoXCJpbnB1dC1maWVsZFwiLCBcImlucHV0XCIsIHtcbiAgICAgICAgICAgIFwidHlwZVwiOiBcInRleHRcIixcbiAgICAgICAgICAgIFwiaWRcIjogXCJwcm9qZWN0LWlucHV0XCIsXG4gICAgICAgICAgICBcIm1heC1sZW5ndGhcIjogXCIyNFwiLFxuICAgICAgICAgICAgXCJwbGFjZWhvbGRlclwiOiBcIkVudGVyIHByb2plY3QgbmFtZVwiLFxuICAgICAgICAgICAgXCJhdXRvY29tcGxldGVcIjogXCJvZmZcIlxuICAgICAgICB9KTtcbiAgICBcblxuICAgICAgICBjb25zdCBhZGRQcm9qZWN0QnV0dG9uID0gY3JlYXRlRWxBbmRBcHBlbmQoXCJpbnB1dC1maWVsZFwiLCBcImJ1dHRvblwiLCB7XG4gICAgICAgICAgICBcInR5cGVcIjogXCJidXR0b25cIixcbiAgICAgICAgICAgIFwiaWRcIjogXCJhZGQtcHJvamVjdC1idG5cIixcblxuICAgICAgICB9KTtcbiAgICAgICAgYWRkUHJvamVjdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiQWRkXCI7XG5cbiAgICAgICAgY29uc3QgY2FuY2VsQnV0dG9uID0gY3JlYXRlRWxBbmRBcHBlbmQoXCJpbnB1dC1maWVsZFwiLCBcImJ1dHRvblwiLCB7XG4gICAgICAgICAgICBcInR5cGVcIjogXCJidXR0b25cIixcbiAgICAgICAgICAgIFwiaWRcIjogXCJjYW5jZWwtYWRkLXByb2plY3QtYnRuXCJcbiAgICAgICAgfSk7XG4gICAgICAgIGNhbmNlbEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiQ2FuY2VsXCI7XG5cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBhZGRCdXR0b24uc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XG4gICAgICAgIGhhbmRsZU5ld1Byb2plY3RzKHByb2plY3RzKTtcbiAgICB9KVxuICAgIFxufTtcblxuZnVuY3Rpb24gaGFuZGxlTmV3UHJvamVjdHMocHJvamVjdHMpIHtcbiAgICBjb25zdCBhZGRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZC1wcm9qZWN0LWJ0blwiKTtcbiAgICBjb25zdCBjYW5jZWxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhbmNlbC1hZGQtcHJvamVjdC1idG5cIik7XG5cbiAgICBhZGRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgY29uc3QgaW5wdXR0ZWROYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0LWlucHV0XCIpLnZhbHVlO1xuICAgICAgICBhZGROZXdQcm9qZWN0KGlucHV0dGVkTmFtZSk7XG4gICAgICAgIGNvbnNvbGUudGFibGUodG9Eb3NPYmopO1xuICAgICAgICBjcmVhdGVCdXR0b25zRm9yRWFjaFByb2plY3RPblNpZGViYXIocHJvamVjdHMpO1xuICAgICAgICBkaXNwbGF5UHJvamVjdHMocHJvamVjdHMpO1xuICAgIFxuICAgIH0pO1xuICAgIFxuICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbnB1dC1maWVsZFwiKTtcbiAgICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtbmV3LXByb2plY3QtYnRuXCIpO1xuICAgICAgICBpZiAoZm9ybSkgZm9ybS5yZW1vdmUoKTtcbiAgICAgICAgYnV0dG9uLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xuXG4gICAgfSlcbn07XG5cbmZ1bmN0aW9uIGFkZE5ld1RvRG9CdG4oKSB7XG4gICAgY29uc3QgbWFpbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFpblwiKTtcbiAgICBsZXQgZXhpc3RpbmdCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5ldy1Ub0RvLWJ0blwiKTtcblxuICAgIGlmICghZXhpc3RpbmdCdXR0b24pIHtcbiAgICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZShcImlkXCIsIFwibmV3LVRvRG8tYnRuXCIpO1xuICAgICAgICBidXR0b24udGV4dENvbnRlbnQgPSBcImFkZFwiO1xuICAgICAgICBtYWluLmFwcGVuZENoaWxkKGJ1dHRvbik7XG4gICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBjb25zdCBuZXdEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBuZXdEaXYuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJpbnB1dC1EaXZcIik7XG4gICAgICAgIG1haW4uYXBwZW5kQ2hpbGQobmV3RGl2KTtcblxuICAgICAgICBjcmVhdGVFbEFuZEFwcGVuZChcImlucHV0LURpdlwiLCBcImZvcm1cIiwge1xuICAgICAgICAgICAgXCJpZFwiOiBcImlucHV0LWZvcm1cIlxuICAgICAgICB9KTtcblxuICAgICAgICBcbiAgICAgICAgY29uc3QgdGl0bGVMYWJlbCA9IGNyZWF0ZUVsQW5kQXBwZW5kKFwiaW5wdXQtZm9ybVwiLCBcImxhYmVsXCIsIHtcbiAgICAgICAgICAgIFwiZm9yXCI6IFwidGl0bGUtaW5wdXRcIixcblxuICAgICAgICB9KTtcbiAgICAgICAgdGl0bGVMYWJlbC50ZXh0Q29udGVudCA9IFwiVGl0bGVcIjtcblxuICAgICAgICBcbiAgICAgICAgY3JlYXRlRWxBbmRBcHBlbmQoXCJpbnB1dC1mb3JtXCIsIFwiaW5wdXRcIiwgeyAgLy9UaXRsZSBpbnB1dFxuICAgICAgICAgICAgXCJ0eXBlXCI6IFwidGV4dFwiLFxuICAgICAgICAgICAgXCJpZFwiOiBcInRpdGxlLWlucHV0XCJcbiAgICAgICAgfSk7XG5cbiAgICAgICBcbiAgICAgICAgY29uc3QgZGVzY0xhYmVsID0gY3JlYXRlRWxBbmRBcHBlbmQoXCJpbnB1dC1mb3JtXCIsIFwibGFiZWxcIiwge1xuICAgICAgICAgICAgXCJmb3JcIjogXCJkZXNjLWlucHV0XCJcbiAgICAgICAgfSk7XG4gICAgICAgIGRlc2NMYWJlbC50ZXh0Q29udGVudCA9IFwiRGVzY3JpcHRpb25cIjtcblxuICAgICAgICBcbiAgICAgICAgY3JlYXRlRWxBbmRBcHBlbmQoXCJpbnB1dC1mb3JtXCIsIFwidGV4dGFyZWFcIiwge1xuICAgICAgICAgICAgXCJpZFwiOiBcImRlc2MtaW5wdXRcIixcbiAgICAgICAgICAgIFwicm93c1wiOiBcIjVcIlxuICAgICAgICB9KTtcblxuICAgICAgICBcbiAgICAgICAgY29uc3QgZGF0ZUxhYmVsID0gY3JlYXRlRWxBbmRBcHBlbmQoXCJpbnB1dC1mb3JtXCIsIFwibGFiZWxcIiwge1xuICAgICAgICAgICAgXCJmb3JcIjogXCJkdWVEYXRlXCJcbiAgICAgICAgfSk7XG4gICAgICAgIGRhdGVMYWJlbC50ZXh0Q29udGVudCA9IFwiRHVlIGRhdGVcIjtcblxuICAgICAgICBjcmVhdGVFbEFuZEFwcGVuZChcImlucHV0LWZvcm1cIiwgXCJpbnB1dFwiLCB7XG4gICAgICAgICAgICBcInR5cGVcIjogXCJkYXRlXCIsXG4gICAgICAgICAgICBcImlkXCI6IFwiZHVlRGF0ZVwiLFxuICAgICAgICAgICAgLy9yZXF1aXJlZFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBwcmlvcml0eUxhYmVsID0gY3JlYXRlRWxBbmRBcHBlbmQoXCJpbnB1dC1mb3JtXCIsIFwibGFiZWxcIiwge1xuICAgICAgICAgICAgXCJmb3JcIjogXCJwcmlvcml0eVwiXG4gICAgICAgIH0pO1xuICAgICAgICBwcmlvcml0eUxhYmVsLnRleHRDb250ZW50ID0gXCJQcmlvcml0eVwiO1xuXG4gICAgICAgIGNyZWF0ZUVsQW5kQXBwZW5kKFwiaW5wdXQtZm9ybVwiLCBcInNlbGVjdFwiLCB7XG4gICAgICAgICAgICBcImlkXCI6IFwicHJpb3JpdHlcIlxuICAgICAgICB9KVxuXG4gICAgICAgIGNvbnN0IHZlcnkgPSBjcmVhdGVFbEFuZEFwcGVuZChcInByaW9yaXR5XCIsIFwib3B0aW9uXCIsIHtcbiAgICAgICAgICAgIFwidmFsdWVcIjogXCJ2ZXJ5XCIsXG5cbiAgICAgICAgfSk7XG4gICAgICAgIHZlcnkudGV4dENvbnRlbnQgPSBcIlZlcnkgSW1wb3J0YW50XCI7XG5cbiAgICAgICAgY29uc3QgaW1wb3J0YW50ID0gY3JlYXRlRWxBbmRBcHBlbmQoXCJwcmlvcml0eVwiLCBcIm9wdGlvblwiLCB7XG4gICAgICAgICAgICBcInZhbHVlXCI6IFwiaW1wb3J0YW50XCIsXG5cbiAgICAgICAgfSk7XG4gICAgICAgIGltcG9ydGFudC50ZXh0Q29udGVudCA9IFwiSW1wb3J0YW50XCI7XG5cbiAgICAgICAgY29uc3Qgbm90ID0gY3JlYXRlRWxBbmRBcHBlbmQoXCJwcmlvcml0eVwiLCBcIm9wdGlvblwiLCB7XG4gICAgICAgICAgICBcInZhbHVlXCI6IFwibm90XCIsXG5cbiAgICAgICAgfSk7XG4gICAgICAgIG5vdC50ZXh0Q29udGVudCA9IFwiTm90IEltcG9ydGFudFwiO1xuXG4gICAgICAgIC8vIGNyZWF0aW5nIHR3byBidXR0b25zIFxuXG4gICAgICAgIGNvbnN0IGFkZEJ1dHRvbiA9IGNyZWF0ZUVsQW5kQXBwZW5kKFwiaW5wdXQtZm9ybVwiLCBcImJ1dHRvblwiLCB7XG4gICAgICAgICAgICBcImlkXCI6IFwiYWRkVG9Eb0J0blwiLFxuICAgICAgICAgICAgXCJ0eXBlXCI6IFwiYnV0dG9uXCJcbiAgICAgICAgfSk7XG4gICAgICAgIGFkZEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiQWRkIFRvLWRvXCI7XG5cbiAgICAgICAgY29uc3QgY2FuY2VsQnRuID0gY3JlYXRlRWxBbmRBcHBlbmQoXCJpbnB1dC1mb3JtXCIsIFwiYnV0dG9uXCIsIHtcbiAgICAgICAgICAgIFwiaWRcIjogXCJjYW5jZWxCdG5cIixcbiAgICAgICAgICAgIFwidHlwZVwiOiBcImJ1dHRvblwiXG4gICAgICAgIH0pO1xuICAgICAgICBjYW5jZWxCdG4udGV4dENvbnRlbnQgPSBcIkNhbmNlbFwiO1xuICAgICAgICBcbiAgICAgICAgaGFuZGxlQnV0dG9ucygpO1xuXG4gICAgfSk7XG4gICAgfVxuXG4gICAgXG59O1xuXG5mdW5jdGlvbiBoYW5kbGVCdXR0b25zKCkge1xuICAgIGNvbnN0IGFkZEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkVG9Eb0J0blwiKTtcbiAgICBjb25zdCBjYW5jZWxCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbmNlbEJ0blwiKTtcblxuICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aXRsZS1pbnB1dFwiKTtcbiAgICBjb25zdCBkZXNjID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZXNjLWlucHV0XCIpO1xuICAgIGNvbnN0IGR1ZURhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImR1ZURhdGVcIik7XG4gICAgY29uc3QgcHJpb3JpdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByaW9yaXR5XCIpO1xuICAgIGNvbnN0IHByb2plY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1haW5IZWFkZXJcIik7XG4gICAgY29uc3QgaW5wdXREaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImlucHV0LURpdlwiKTtcblxuICAgIGFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBhZGRUb0RvT2JqKGNyZWF0ZVRvRG8odGl0bGUudmFsdWUsIGRlc2MudmFsdWUsIGR1ZURhdGUudmFsdWUgPSBmb3JtYXQoRGF0ZS5ub3coKSwgXCJNTS1kZC15eXl5XCIpLCBwcmlvcml0eS52YWx1ZSksIHByb2plY3QudGV4dENvbnRlbnQpO1xuICAgICAgICBpbnB1dERpdi5yZW1vdmUoKTtcbiAgICB9KTtcblxuICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBpbnB1dERpdi5yZW1vdmUoKTtcbiAgICB9KVxufTtcblxuXG5cbi8vaGVscGVyIGZ1bmN0aW9uIHRvIGNyZWF0ZSBlbGVtZW50cyBhbmQgYXBwZW5kIHRoZW0gdG8gdGhlIHBhcmVudCBlbGVtZW50XG5mdW5jdGlvbiBjcmVhdGVFbEFuZEFwcGVuZChwYXJlbnRFbElkLCB0eXBlLCBhdHRyaWJ1dGVzKSB7IFxuICAgIGxldCBuZXdFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodHlwZSk7XG4gICAgXG4gICAgZm9yIChsZXQga2V5IGluIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgaWYgKGF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgbmV3RWwuc2V0QXR0cmlidXRlKGtleSwgYXR0cmlidXRlc1trZXldKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBsZXQgcGFyZW50RWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwYXJlbnRFbElkKTtcblxuICAgIHBhcmVudEVsLmFwcGVuZENoaWxkKG5ld0VsKTtcbiAgICBcbiAgICByZXR1cm4gbmV3RWw7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRGF0ZXMoKSB7XG4gICAgLy9jb25zdCBkaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvLWRvcy1kaXZcIik7XG4gICAgXG4gICAgY29uc3QgYWxsID0gY3JlYXRlRWxBbmRBcHBlbmQoXCJ0by1kb3MtZGl2XCIsIFwiYnV0dG9uXCIsIHtcbiAgICAgICAgXCJ0eXBlXCI6IFwiYnV0dG9uXCIsXG4gICAgICAgIFwiaWRcIjogXCJhbGwtdG8tZG9zXCJcbiAgICB9KTtcbiAgICBhbGwudGV4dENvbnRlbnQgPSBcIkFsbFwiO1xuXG4gICAgY29uc3QgdG9kYXkgPSBjcmVhdGVFbEFuZEFwcGVuZChcInRvLWRvcy1kaXZcIiwgXCJidXR0b25cIiwge1xuICAgICAgICBcInR5cGVcIjogXCJidXR0b25cIixcbiAgICAgICAgXCJpZFwiOiBcInRvZGF5LXRvLWRvc1wiXG4gICAgfSlcbiAgICB0b2RheS50ZXh0Q29udGVudCA9IFwiVG9kYXlcIjtcblxuICAgIGNvbnN0IG5leHRXZWVrID0gY3JlYXRlRWxBbmRBcHBlbmQoXCJ0by1kb3MtZGl2XCIsIFwiYnV0dG9uXCIsIHtcbiAgICAgICAgXCJ0eXBlXCI6IFwiYnV0dG9uXCIsXG4gICAgICAgIFwiaWRcIjogXCJuZXh0LXdlZWstdG8tZG9zXCJcbiAgICB9KVxuICAgIG5leHRXZWVrLnRleHRDb250ZW50ID0gXCJOZXh0IHdlZWtcIjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZURhdGVzKHByb2plY3RzKSB7XG4gICAgY29uc3QgYWxsQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhbGwtdG8tZG9zXCIpO1xuICAgIGNvbnN0IHRvZGF5QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b2RheS10by1kb3NcIik7XG4gICAgY29uc3QgbmV4dFdlZWtCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5leHQtd2Vlay10by1kb3NcIik7XG4gICAgY29uc3QgbWFpbkRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFpbkRpdlwiKTtcbiAgICBjb25zdCBoMSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFpbkhlYWRlclwiKTtcbiAgICBjb25zdCBidXR0b25Ub1JlbW92ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmV3LVRvRG8tYnRuXCIpO1xuICAgIFxuICAgIGFsbEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBjb25zdCB1bCA9IHRlc3QyKHByb2plY3RzLCBudWxsLCBudWxsKTtcbiAgICAgICAgbWFpbkRpdi5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgICBtYWluRGl2LmFwcGVuZENoaWxkKHVsKVxuICAgICAgICBoMS50ZXh0Q29udGVudCA9IGFsbEJ0bi50ZXh0Q29udGVudDtcbiAgICAgICAgLy8gYWxlcnQoYnV0dG9uVG9SZW1vdmUpO1xuICAgIH0pXG59O1xuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4iLCJpbXBvcnQgeyBjcmVhdGVUb0RvLCB0b0Rvc09iaiwgYWRkVG9Eb09iaiB9IGZyb20gXCIuL2NyZWF0ZVRvRG9cIjtcbmltcG9ydCB7IGhhbmRsZURhdGVzLCBjcmVhdGVCdXR0b25zRm9yRWFjaFByb2plY3RPblNpZGViYXIsIGNyZWF0ZURhdGVzLCBkaXNwbGF5UHJvamVjdHMgfSBmcm9tIFwiLi9VSVwiO1xuLy8gaW1wb3J0IHsgYWxlcnREYXRlIH0gZnJvbSBcIi4vZGF0ZXNcIjtcblxuLy8gY3JlYXRpbmcgdGhyZWUgbmV3IHRvZG9zIHdpdGggY3JlYXRlVG9EbyBmdW5jdGlvblxuY29uc3QgbmV3RG8gPSBjcmVhdGVUb0RvKFwiTWlsa1wiLCBcIkJ1eSBzb21lIG1pbGsgZm9yIHRoZSBjYXRcIiwgXCIxMi0wMi0yMDI0XCIsIFwidmVyeSBpbXBvcnRhbnRcIik7XG5jb25zdCBhbm90aGVyRG8gPSBjcmVhdGVUb0RvKFwiV3JpdGluZ1wiLCBcIldyaXRlIHNvbWUgdGV4dCB0byBteSBib29rXCIsIFwiMTQtMDQtMjAyNFwiLCBcIm5vdCBpbXBvcnRhbnRcIiwgdHJ1ZSk7XG5jb25zdCB0aGlyZFRvRG8gPSBjcmVhdGVUb0RvKFwiQnV5IGNhdCBmb29kXCIsIFwiQnV5IHNvbWUga2l0ZWthdFwiLCBcIjA0LTA1LTIwMjRcIiwgXCJ2ZXJ5IGltcG9ydGFudFwiKTtcblxuXG4vLyBhZGRpbmcgcHJldmlvdXNseSBjcmVhdGVkIHRvZG9zIHRvIHRoZSBvYmplY3QgaG9sZGluZyB0b2RvcyB3aXRoIHRoZSBhZGRUb0RvT2JqIGZ1bmN0aW9uXG5hZGRUb0RvT2JqKG5ld0RvKTtcbmFkZFRvRG9PYmooYW5vdGhlckRvLyosIGUuZy4gaG9tZSovKTsgLy8gb3B0aW9uYWwgYXJndW1lbnQgdGhhdCBzcGVjaWZpZXMgdGhlIHByb2plY3QgdG8gcHV0IHRoZSB0by1kbyBpbnRvXG5hZGRUb0RvT2JqKHRoaXJkVG9Ebyk7XG5cblxuKGZ1bmN0aW9uIGNyZWF0ZVBhZ2UoKSB7XG4gICAgY3JlYXRlRGF0ZXMoKTtcbiAgICBoYW5kbGVEYXRlcyh0b0Rvc09iaik7XG4gICAgY3JlYXRlQnV0dG9uc0ZvckVhY2hQcm9qZWN0T25TaWRlYmFyKHRvRG9zT2JqKTtcbiAgICBkaXNwbGF5UHJvamVjdHModG9Eb3NPYmopO1xufSkoKTsiXSwibmFtZXMiOlsidGl0bGUiLCJkZXNjIiwiZHVlRGF0ZSIsInByaW9yaXR5IiwiY29tcGxldGVkIiwiaWQiLCJEYXRlIiwibm93IiwidG9Eb3NPYmoiLCJ0b0RvIiwicHJvamVjdCIsInB1c2giLCJ0ZXN0MiIsIm9iaiIsImRhdGUiLCJ1bCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNyZWF0ZUxpIiwibGkiLCJjbGFzc0xpc3QiLCJhZGQiLCJrZXkiLCJpbmNsdWRlcyIsInAiLCJ0ZXh0Q29udGVudCIsImFwcGVuZENoaWxkIiwiZGVsZXRlQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRhcmdldFByb2plY3QiLCJPYmplY3QiLCJ2YWx1ZXMiLCJmaW5kIiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwicmVtb3ZlIiwiZm9yRWFjaCIsInByb2plY3ROYW1lcyIsImNvbnNvbGUiLCJsb2ciLCJkaXNwbGF5UHJvamVjdHMiLCJwcm9qZWN0cyIsImJ1dHRvbnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwibWFpbkRpdiIsInF1ZXJ5U2VsZWN0b3IiLCJoMSIsImdldEVsZW1lbnRCeUlkIiwiYnV0dG9uIiwiaW5uZXJIVE1MIiwiY3JlYXRlRWxBbmRBcHBlbmQiLCJwYXJlbnRFbElkIiwidHlwZSIsImF0dHJpYnV0ZXMiLCJuZXdFbCIsImhhc093blByb3BlcnR5Iiwic2V0QXR0cmlidXRlIiwibmV3RG8iLCJhbm90aGVyRG8iLCJ0aGlyZFRvRG8iLCJhbGxCdG4iLCJoYW5kbGVEYXRlcyIsImNyZWF0ZUJ1dHRvbnNGb3JFYWNoUHJvamVjdE9uU2lkZWJhciIsInByb2plY3RzRGl2IiwicHJvamVjdHNLZXlzIiwia2V5cyIsInByb2plY3RIZWFkZXIiLCJidXR0b25OYW1lIiwiYWRkQnV0dG9uIiwiZm9ybSIsImFkZEJ0biIsImNhbmNlbEJ0biIsImlucHV0dGVkTmFtZSIsInZhbHVlIiwidGFibGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJoYW5kbGVOZXdQcm9qZWN0cyIsImFkZFByb2plY3RCdXR0b24iXSwic291cmNlUm9vdCI6IiJ9